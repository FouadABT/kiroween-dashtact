{
  "enabled": true,
  "name": "Next.js Page Header & Metadata Agent",
  "description": "Monitors Next.js page files for creation or modification and automatically ensures they have proper PageHeader components, breadcrumb configuration, and metadata setup. Handles special cases like auth pages, error pages, and dynamic routes while maintaining existing page structure.",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "frontend/src/app/**/page.tsx",
      "frontend/src/lib/metadata/metadata.config.ts"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "A Next.js page file has been created or modified. Your task is to:\n\n1. **Analyze the page file** to determine:\n   - Is this a new page or an existing page being modified?\n   - What is the page route/path?\n   - Does it already have a PageHeader component?\n   - Should this page have breadcrumbs? (Skip for: login, register, 403, 404, 500, auth pages, public landing pages)\n   - What is the appropriate page title and description?\n\n2. **Check metadata configuration** (`frontend/src/lib/metadata/metadata.config.ts`):\n   - Does this route have metadata defined?\n   - If not, add appropriate metadata entry with title, description, and breadcrumb config\n   - Ensure breadcrumb labels are user-friendly (not just slugs)\n\n3. **Update the page file** if needed:\n   - Import PageHeader component: `import { PageHeader } from '@/components/layout/PageHeader';`\n   - Add PageHeader at the top of the page content (after any guards)\n   - Include title, description, and any relevant actions\n   - Example:\n     ```tsx\n     <PageHeader \n       title=\"Page Title\"\n       description=\"Page description\"\n     />\n     ```\n\n4. **Handle special cases**:\n   - **Auth pages** (login, register): NO breadcrumbs, NO PageHeader\n   - **Error pages** (403, 404, 500): NO breadcrumbs, custom error UI\n   - **Dashboard home**: Breadcrumbs but simple (just \"Dashboard\")\n   - **Nested pages**: Full breadcrumb trail (Dashboard > Users > Edit User)\n   - **Dynamic routes**: Use metadata config for dynamic labels\n\n5. **Verify breadcrumb configuration**:\n   - Check if breadcrumb generation will work for this route\n   - Ensure parent routes have proper labels\n   - Add custom breadcrumb config if needed for dynamic segments\n\n6. **Pages to IGNORE** (do not add PageHeader/breadcrumbs):\n   - `/login`, `/register`, `/auth/*`\n   - `/403`, `/404`, `/500`, `/error`\n   - Root `/` (landing page)\n   - Any page with `@Public()` decorator or public layout\n\n7. **Safety checks**:\n   - Don't remove existing PageHeader if already present\n   - Don't break existing page structure\n   - Preserve all existing imports and components\n   - Maintain proper TypeScript types\n   - Keep existing metadata if already defined\n\n8. **Generate a report** with:\n   - What changes were made (or why no changes needed)\n   - Page route and title\n   - Whether breadcrumbs were added\n   - Metadata configuration status\n   - Any manual steps needed\n   - List of files modified\n\nFollow the existing patterns in the codebase. Reference the metadata system documentation and existing page implementations for consistency."
  }
}